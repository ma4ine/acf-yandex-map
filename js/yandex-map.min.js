!function(l){var o=yandex_locale.plugin_url,i={iconLayout:"default#image",iconImageHref:o+"svg/mark-house-1.svg",iconImageSize:[36,36],iconImageOffset:[-18,-36]},s={fillColor:"#44A147",strokeColor:"#18803F",strokeWidth:2,opacity:.7};ymaps.ready(function(){l(".yandex-map").each(function(o,e){var n=l(e).attr("id");if(void 0!==n&&void 0!==window[n]){var t=l.parseJSON(window[n].params),a=new ymaps.Map(n,{zoom:t.zoom,center:[t.center_lat,t.center_lng]},{});if(a.controls.remove("trafficControl"),a.controls.remove("searchControl"),a.controls.remove("geolocationControl"),null!=t.marks&&l(t.marks).each(function(o,e){var n=null;n="Point"==e.type?new ymaps.Placemark(e.coords,{balloonContent:e.content}):new ymaps.Circle([e.coords,e.circle_size],{balloonContent:e.content},{opacity:.5,fillOpacity:.1,fillColor:"#DB709377",strokeColor:"#990066",strokeOpacity:.7,strokeWidth:5}),a.geoObjects.add(n)}),"ymap_full"===n){$object_manager=new ymaps.ObjectManager({geoObjectOpenBalloonOnClick:!1});var r=Object.assign({},i,s);function c(o){a.geoObjects.add($object_manager);var e=window[n].plugin_url;l.ajax({url:e+"json/"+o+".json"}).done(function(o){$object_manager.add(o),console.log("Map data loaded"),a.setBounds(a.geoObjects.getBounds(),{checkZoomRange:!0})}).fail(function(){console.error("Map data error")})}$object_manager.objects.options.set(r),$object_manager.objects.events.add("click",function(o){var e=o.get("objectId"),n=$object_manager.objects.getById(e);!function(o){return $object_manager.objects.getById(o).properties.balloonContent}(e)?(n.properties.balloonContent="Идет загрузка данных...",$object_manager.objects.balloon.open(e),function(o){var e=ymaps.vow.defer();return window.setTimeout(function(){e.resolve("Данные балуна")},1e3),e.promise()}().then(function(o){n.properties.balloonContent=o,$object_manager.objects.balloon.setData(n)})):$object_manager.objects.balloon.open(e)}),l("a.js-map-link").on("click",function(){$object_manager.removeAll(),c("land-vsevolozhsk")}),l("button.js-map-link").on("click",function(){$object_manager.removeAll(),c("land-tajtsy")})}}})})}(jQuery);
//# sourceMappingURL=yandex-map.min.js.map